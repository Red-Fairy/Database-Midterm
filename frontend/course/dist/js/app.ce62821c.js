(function(){"use strict";var e={3719:function(e,s,t){var n=t(9242),r=t(3396);const o={id:"app"};function a(e,s,t,n,a,u){const i=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(i)])}var u={name:"App"},i=t(89);const l=(0,i.Z)(u,[["render",a]]);var c=l,d=t(678),m=t(7139);const h=e=>((0,r.dD)("data-v-19d7512d"),e=e(),(0,r.Cn)(),e),I={class:"login"},g=h((()=>(0,r._)("h1",null,"Login",-1))),p=h((()=>(0,r._)("label",{for:"userid"},"User ID:",-1))),D=h((()=>(0,r._)("label",{for:"password"},"Password:",-1))),_={class:"button-container"},w=h((()=>(0,r._)("button",{type:"submit"},"Login",-1))),b={key:0};function f(e,s,t,o,a,u){return(0,r.wg)(),(0,r.iD)("div",I,[g,(0,r._)("form",{onSubmit:s[3]||(s[3]=(0,n.iM)(((...e)=>u.logIn&&u.logIn(...e)),["prevent"]))},[(0,r._)("div",null,[p,(0,r.wy)((0,r._)("input",{type:"text",id:"userid","onUpdate:modelValue":s[0]||(s[0]=e=>a.userid=e)},null,512),[[n.nr,a.userid]])]),(0,r._)("div",null,[D,(0,r.wy)((0,r._)("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=e=>a.password=e)},null,512),[[n.nr,a.password]])]),(0,r._)("div",_,[w,(0,r._)("button",{type:"button",onClick:s[2]||(s[2]=(0,n.iM)(((...e)=>u.goToRegister&&u.goToRegister(...e)),["prevent"]))},"Register")]),a.errorMsg?((0,r.wg)(),(0,r.iD)("div",b,(0,m.zw)(a.errorMsg),1)):(0,r.kq)("",!0)],32)])}t(7658);var y=t(4161);const v=y.Z.create({baseURL:"http://localhost:5000",headers:{Accept:"application/json","Content-Type":"application/json"}});var C={async register(e,s){const t=await v.post("/api/user/register",{username:e,password:s});return t.data},async login(e,s){const t=await v.post("/api/user/login",{userid:e,password:s});return t.data},async createCourse(e){const s=await v.post("/api/user/course",{courseID:e.courseID,courseName:e.courseName,courseInfo:e.courseInfo,permission:!0,method:"ADD"});return s.data},async deleteCourse(e){const s=await v.post("/api/user/course",{courseID:e,permission:!0,method:"DELETE"});return s.data},async getCourses(e,s){const t=await v.get("/api/user/course",{params:{permission:e,userID:s}});return t.data},async getCourseData(e){return await v.get("/api/user/user_course",{params:{courseID:e}})},async addTeacher(e,s){return await v.post("/api/user/user_course",{method:"ADD",permission:!0,courseID:e,userID:s,teacher:1})},async addStudent(e,s){return await v.post("/api/user/user_course",{method:"ADD",permission:!0,courseID:e,userID:s,teacher:0})},async deleteUser(e,s){return await v.post("/api/user/user_course",{method:"DELETE",permission:!0,courseID:e,userID:s})},async getCourseLectures(e){const s=await v.get("/api/user/lecture",{params:{courseID:e}});return s.data},async addCourseLecture(e){e.permission=!0;const s=await v.post("/api/user/lecture",e);return s.data},async updateCourseLecture(e){e.permission=!0;const s=await v.post("/api/user/lecture",e);return s.data},async getCourseAssignments(e){const s=await v.get(`/api/user/assignment?courseID=${e}`);return s.data},async addCourseAssignment(e){const s=await v.post("/api/user/assignment",e);return s.data},async updateCourseAssignment(e){const s=await v.post("/api/user/assignment",e);return s.data},async getCourseAssignmentSubmissions(e,s,t){const n={courseID:e,assignmentID:s,permission:t,method:"GET"},r=await v.post("/api/user/submission",n);return r.data},async updateSubmissionScore(e,s){const t={submissionID:e,score:s,permission:!0,method:"UPDATE"};console.log(t);const n=await v.post("/api/user/submission",t);return n.data},async getCourseAssignmentSubmissionsStudent(e,s,t,n){const r={courseID:e,assignmentID:s,userID:t,permission:n,method:"GET"},o=await v.post("/api/user/submission",r);return o.data},async submitAssignment(e,s,t,n){const r={courseID:s,assignmentID:e,userID:t,submissionInfo:n,permission:!0,method:"SUBMIT"},o=await v.post("/api/user/submission",r);return o.data}},k={data(){return{userid:"",password:"",errorMsg:""}},methods:{async logIn(){try{const e=await C.login(this.userid,this.password);200===e.code?(localStorage.setItem("token",e.token),localStorage.setItem("permission",e.permission),localStorage.setItem("userID",this.userid),e.permission?this.$router.push({name:"AdminDashboard"}):this.$router.push({name:"UserDashboard"})):this.errorMsg=e.msg}catch(e){console.error("Login error:",e),this.errorMsg="登录失败，请稍后重试。"}},goToRegister(){this.$router.push("/register")}}};const A=(0,i.Z)(k,[["render",f],["__scopeId","data-v-19d7512d"]]);var S=A;const L=e=>((0,r.dD)("data-v-75a7f689"),e=e(),(0,r.Cn)(),e),T={class:"register"},U=L((()=>(0,r._)("h1",null,"Register",-1))),z=L((()=>(0,r._)("label",{for:"userid"},"User ID:",-1))),$=L((()=>(0,r._)("label",{for:"password"},"Password:",-1))),N=L((()=>(0,r._)("div",null,[(0,r._)("button",{type:"submit"},"Register")],-1))),V={key:0};function E(e,s,t,o,a,u){return(0,r.wg)(),(0,r.iD)("div",T,[U,(0,r._)("form",{onSubmit:s[2]||(s[2]=(0,n.iM)(((...e)=>u.register&&u.register(...e)),["prevent"]))},[(0,r._)("div",null,[z,(0,r.wy)((0,r._)("input",{type:"text",id:"userid","onUpdate:modelValue":s[0]||(s[0]=e=>a.userid=e)},null,512),[[n.nr,a.userid]])]),(0,r._)("div",null,[$,(0,r.wy)((0,r._)("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=e=>a.password=e)},null,512),[[n.nr,a.password]])]),N,a.errorMsg?((0,r.wg)(),(0,r.iD)("div",V,(0,m.zw)(a.errorMsg),1)):(0,r.kq)("",!0)],32),(0,r._)("div",null,[(0,r._)("button",{onClick:s[3]||(s[3]=(0,n.iM)(((...e)=>u.goToLogin&&u.goToLogin(...e)),["prevent"]))},"Back to Login")])])}var M={data(){return{userid:"",password:"",role:"teacher",errorMsg:""}},methods:{async register(){try{const e=await C.register(this.userid,this.password);"200"===e.status?this.errorMsg="注册成功":this.errorMsg=e.msg}catch(e){this.errorMsg="An error occurred. Please try again."}},goToLogin(){this.$router.push("/login")}}};const H=(0,i.Z)(M,[["render",E],["__scopeId","data-v-75a7f689"]]);var K=H;const Y=e=>((0,r.dD)("data-v-3660c162"),e=e(),(0,r.Cn)(),e),F={class:"centered-container"},x=Y((()=>(0,r._)("h2",null,"课程管理",-1))),O=Y((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"课程ID"),(0,r._)("th",null,"课程名称"),(0,r._)("th",null,"课程信息"),(0,r._)("th",null,"操作")])],-1))),Z=["onClick"],P={class:"new-course-form"},j=Y((()=>(0,r._)("h3",null,"创建新课程",-1))),q={key:0,class:"error"};function R(e,s,t,o,a,u){const i=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",F,[x,(0,r._)("table",null,[O,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.courses,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.courseID},[(0,r._)("td",null,(0,m.zw)(e.courseID),1),(0,r._)("td",null,(0,m.zw)(e.courseName),1),(0,r._)("td",null,(0,m.zw)(e.courseInfo),1),(0,r._)("td",null,[(0,r._)("button",{onClick:s=>u.deleteCourse(e.courseID)},"删除课程",8,Z),(0,r._)("button",null,[(0,r.Wm)(i,{to:{name:"AdminCourse",params:{courseID:e.courseID}},class:"btn btn-default"},{default:(0,r.w5)((()=>[(0,r.Uk)(" 进入课程 ")])),_:2},1032,["to"])])])])))),128))])]),(0,r._)("div",P,[j,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>a.newCourse.courseID=e),placeholder:"课程ID"},null,512),[[n.nr,a.newCourse.courseID]]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.newCourse.courseName=e),placeholder:"课程名称"},null,512),[[n.nr,a.newCourse.courseName]]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>a.newCourse.courseInfo=e),placeholder:"课程信息"},null,512),[[n.nr,a.newCourse.courseInfo]]),(0,r._)("button",{onClick:s[3]||(s[3]=(...e)=>u.createCourse&&u.createCourse(...e))},"创建课程")]),a.error?((0,r.wg)(),(0,r.iD)("div",q,(0,m.zw)(a.error),1)):(0,r.kq)("",!0)])}var W={data(){return{newCourse:{courseID:"",courseName:"",courseInfo:""},courses:[],error:""}},methods:{async createCourse(){if(this.newCourse.courseID&&this.newCourse.courseName&&this.newCourse.courseInfo){const e=await C.createCourse(this.newCourse);"200"===e.status?(this.courses.push(this.newCourse),this.newCourse={courseID:"",courseName:"",courseInfo:""},this.error=""):this.error="创建课程失败"}},async deleteCourse(e){if(confirm("确定要删除这个课程吗？")){const s=await C.deleteCourse(e);"200"===s.status?(this.courses=this.courses.filter((s=>s.courseID!==e)),this.error=""):this.error="删除课程失败"}}},async mounted(){const e=await C.getCourses("admin");"200"===e.status&&(this.courses=e.tabledata)}};const B=(0,i.Z)(W,[["render",R],["__scopeId","data-v-3660c162"]]);var G=B;const J=e=>((0,r.dD)("data-v-6b5c31cf"),e=e(),(0,r.Cn)(),e),Q={class:"centered-container"},X=J((()=>(0,r._)("h3",{class:"section-title"},"以下课程中，您为学生：",-1))),ee={class:"course-table"},se=J((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"课程ID"),(0,r._)("th",null,"课程名称"),(0,r._)("th",null,"操作")])],-1))),te={class:"action-button"},ne=J((()=>(0,r._)("h3",{class:"section-title"},"以下课程中，您为老师：",-1))),re={class:"course-table"},oe=J((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"课程ID"),(0,r._)("th",null,"课程名称"),(0,r._)("th",null,"操作")])],-1))),ae={class:"action-button"},ue={key:0,class:"error"};function ie(e,s,t,n,o,a){const u=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",Q,[X,(0,r._)("table",ee,[se,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.student_courses,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.courseID},[(0,r._)("td",null,(0,m.zw)(e.courseID),1),(0,r._)("td",null,(0,m.zw)(e.courseName),1),(0,r._)("td",null,[(0,r._)("button",te,[(0,r.Wm)(u,{to:{name:"StudentCourse",params:{courseID:e.courseID,userID:o.userID}}},{default:(0,r.w5)((()=>[(0,r.Uk)(" 进入课程 ")])),_:2},1032,["to"])])])])))),128))])]),ne,(0,r._)("table",re,[oe,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.teacher_courses,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.courseID},[(0,r._)("td",null,(0,m.zw)(e.courseID),1),(0,r._)("td",null,(0,m.zw)(e.courseName),1),(0,r._)("td",null,[(0,r._)("button",ae,[(0,r.Wm)(u,{to:{name:"TeacherCourse",params:{courseID:e.courseID,userID:o.userID}}},{default:(0,r.w5)((()=>[(0,r.Uk)(" 进入课程 ")])),_:2},1032,["to"])])])])))),128))])]),o.error?((0,r.wg)(),(0,r.iD)("div",ue,(0,m.zw)(o.error),1)):(0,r.kq)("",!0)])}var le={name:"ComponentName",data(){return{userID:"",error:"",student_courses:[],teacher_courses:[]}},async mounted(){const e=localStorage.getItem("userID");this.userID=e;const s=await C.getCourses("user",e);"200"===s.status&&(this.student_courses=s.student_courses,this.teacher_courses=s.teacher_courses)},methods:{}};const ce=(0,i.Z)(le,[["render",ie],["__scopeId","data-v-6b5c31cf"]]);var de=ce;const me=e=>((0,r.dD)("data-v-6bc9502f"),e=e(),(0,r.Cn)(),e),he={class:"course-details"},Ie={class:"teacher-list"},ge=me((()=>(0,r._)("h3",null,"教师列表：",-1))),pe=me((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{class:"centered-header"},"教师ID")])],-1))),De={class:"student-list"},_e=me((()=>(0,r._)("h3",null,"学生列表：",-1))),we=me((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{class:"centered-header"},"学生ID")])],-1))),be={class:"lecture-list"},fe=me((()=>(0,r._)("h3",null,"讲座信息：",-1))),ye=me((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"讲座ID"),(0,r._)("th",null,"讲座信息"),(0,r._)("th",null,"操作")])],-1))),ve=["onUpdate:modelValue","placeholder"],Ce=["onClick"],ke=["onClick"],Ae={class:"add-lecture"},Se={key:0,class:"error"},Le={class:"assignment-list"},Te=me((()=>(0,r._)("h3",null,"作业信息：",-1))),Ue=me((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"作业ID"),(0,r._)("th",null,"作业信息"),(0,r._)("th",null,"操作")])],-1))),ze=["onUpdate:modelValue","placeholder"],$e=["onClick"],Ne=["onClick"],Ve=["onClick"],Ee={class:"add-assignment"},Me={key:0,class:"error"};function He(e,s,t,o,a,u){return(0,r.wg)(),(0,r.iD)("div",he,[(0,r._)("h3",null,"课程名称："+(0,m.zw)(a.courseName),1),(0,r._)("h3",null,"课程信息："+(0,m.zw)(a.courseInfo),1),(0,r._)("div",Ie,[ge,(0,r._)("table",null,[pe,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.teachers,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e},[(0,r._)("td",null,(0,m.zw)(e),1)])))),128))])])]),(0,r._)("div",De,[_e,(0,r._)("table",null,[we,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.students,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e},[(0,r._)("td",null,(0,m.zw)(e),1)])))),128))])])]),(0,r._)("div",be,[fe,(0,r._)("table",null,[ye,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.lectures,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.lectureID},[(0,r._)("td",null,(0,m.zw)(e.lectureID),1),(0,r._)("td",null,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s=>a.editLectureInfo[e.lectureID]=s,type:"text",placeholder:e.lectureInfo},null,8,ve),[[n.nr,a.editLectureInfo[e.lectureID]]])]),(0,r._)("td",null,[(0,r._)("button",{onClick:s=>u.editLecture(e.lectureID)},"编辑",8,Ce),(0,r._)("button",{onClick:s=>u.deleteLecture(e.lectureID)},"删除",8,ke)])])))),128))])]),(0,r._)("div",Ae,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>a.newLectureInfo.lectureID=e),type:"int",placeholder:"输入新的讲座ID"},null,512),[[n.nr,a.newLectureInfo.lectureID]]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.newLectureInfo.lectureInfo=e),type:"text",placeholder:"输入新的讲座信息"},null,512),[[n.nr,a.newLectureInfo.lectureInfo]]),(0,r._)("button",{onClick:s[2]||(s[2]=(...e)=>u.addLecture&&u.addLecture(...e))},"添加讲座")]),a.errorLecture?((0,r.wg)(),(0,r.iD)("div",Se,(0,m.zw)(a.errorLecture),1)):(0,r.kq)("",!0)]),(0,r._)("div",Le,[Te,(0,r._)("table",null,[Ue,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.assignments,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.assignmentID},[(0,r._)("td",null,(0,m.zw)(e.assignmentID),1),(0,r._)("td",null,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s=>a.editAssignmentInfo[e.assignmentID]=s,type:"text",placeholder:e.assignmentInfo},null,8,ze),[[n.nr,a.editAssignmentInfo[e.assignmentID]]])]),(0,r._)("td",null,[(0,r._)("button",{onClick:s=>u.editAssignment(e.assignmentID)},"编辑",8,$e),(0,r._)("button",{onClick:s=>u.deleteAssignment(e.assignmentID)},"删除",8,Ne),(0,r._)("button",{onClick:s=>u.goToAssignment(e.assignmentID,a.courseID)},"查看作业",8,Ve)])])))),128))])]),(0,r._)("div",Ee,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>a.newAssignmentInfo.assignmentID=e),type:"int",placeholder:"输入新的作业ID"},null,512),[[n.nr,a.newAssignmentInfo.assignmentID]]),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>a.newAssignmentInfo.assignmentInfo=e),type:"text",placeholder:"输入新的作业信息"},null,512),[[n.nr,a.newAssignmentInfo.assignmentInfo]]),(0,r._)("button",{onClick:s[5]||(s[5]=(...e)=>u.addAssignment&&u.addAssignment(...e))},"添加作业")]),a.errorAssignment?((0,r.wg)(),(0,r.iD)("div",Me,(0,m.zw)(a.errorAssignment),1)):(0,r.kq)("",!0)])])}var Ke={data(){return{errorLecture:"",errorAssignment:"",courseID:"",userID:"",students:[],teachers:[],lectures:[],assignments:[],courseInfo:"",courseName:"",newLectureInfo:{lectureID:"",lectureInfo:""},newAssignmentInfo:{assignmentID:"",assignmentInfo:""},editLectureInfo:{},editAssignmentInfo:{}}},async mounted(){this.userID=this.$route.params.userID,this.courseID=this.$route.params.courseID;const e=this.$route.params.courseID,s=await C.getCourseData(e);"200"===s.data.status?(this.students=s.data.students,this.teachers=s.data.teachers,this.courseInfo=s.data.courseInfo,this.courseName=s.data.courseName):console.error("Failed to fetch course data");const t=await C.getCourseLectures(e);this.lectures=t.tabledata;const n=await C.getCourseAssignments(e);this.assignments=n.tabledata},methods:{async editLecture(e){const s=this.editLectureInfo[e],t=this.$route.params.courseID;s&&(await C.updateCourseLecture({courseID:t,lectureID:e,lectureInfo:s,method:"UPDATE"}),this.lectures=this.lectures.map((t=>t.lectureID===e?{...t,lectureInfo:s}:t)))},async addLecture(){const e=this.newLectureInfo;if(e){e["method"]="ADD",e["courseID"]=this.$route.params.courseID;const s=await C.addCourseLecture(e);"200"===s.status?(this.lectures.push({lectureID:e.lectureID,lectureInfo:e.lectureInfo}),this.newLectureInfo={},this.errorLecture=""):(console.log("Failed to add lecture"),this.errorLecture="Failed to add lecture")}},async deleteLecture(e){const s=this.$route.params.courseID;await C.updateCourseLecture({courseID:s,lectureID:e,method:"DELETE"}),this.lectures=this.lectures.filter((s=>s.lectureID!==e))},async editAssignment(e){const s=this.editAssignmentInfo[e];s&&(await C.updateCourseAssignment({courseID:this.$route.params.courseID,assignmentID:e,assignmentInfo:s,method:"UPDATE"}),this.assignments=this.assignments.map((t=>t.assignmentID===e?{...t,assignmentInfo:s}:t)))},async addAssignment(){const e=this.newAssignmentInfo;if(e){e["method"]="ADD",e["courseID"]=this.$route.params.courseID;const s=await C.addCourseAssignment(e);"200"===s.status?(this.assignments.push({assignmentID:e.assignmentID,assignmentInfo:e.assignmentInfo}),this.newAssignmentInfo={},this.errorAssignment=""):(console.log("Failed to add assignment"),this.errorAssignment="Failed to add assignment")}},async deleteAssignment(e){await C.updateCourseAssignment({courseID:this.$route.params.courseID,assignmentID:e,method:"DELETE"}),this.assignments=this.assignments.filter((s=>s.assignmentID!==e))},goToAssignment(e,s){this.$router.push({name:"TeacherAssignment",params:{assignmentID:e,courseID:s}})}}};const Ye=(0,i.Z)(Ke,[["render",He],["__scopeId","data-v-6bc9502f"]]);var Fe=Ye;const xe=e=>((0,r.dD)("data-v-3ef3fd56"),e=e(),(0,r.Cn)(),e),Oe={class:"centered-container"},Ze={key:0,class:"error"},Pe=xe((()=>(0,r._)("h2",null,"Teachers",-1))),je=xe((()=>(0,r._)("th",null,"Username",-1))),qe=["onClick"],Re=xe((()=>(0,r._)("h2",null,"Students",-1))),We=xe((()=>(0,r._)("th",null,"Username",-1))),Be=["onClick"];function Ge(e,s,t,o,a,u){const i=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",Oe,[(0,r._)("h1",null,(0,m.zw)(a.courseName),1),(0,r._)("p",null,(0,m.zw)(a.courseInfo),1),a.error?((0,r.wg)(),(0,r.iD)("div",Ze,(0,m.zw)(a.error),1)):(0,r.kq)("",!0),Pe,(0,r._)("table",null,[(0,r._)("thead",null,[(0,r._)("tr",null,[je,(0,r._)("th",null,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>a.newTeacher=e)},null,512),[[n.nr,a.newTeacher]]),(0,r._)("button",{onClick:s[1]||(s[1]=(...e)=>u.addTeacher&&u.addTeacher(...e))},"Add")])])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.teachers,((e,s)=>((0,r.wg)(),(0,r.iD)("tr",{key:s},[(0,r._)("td",null,(0,m.zw)(e),1),(0,r._)("td",null,[(0,r._)("button",{onClick:s=>u.deleteUser(e,!0)},"Delete",8,qe)])])))),128))])]),Re,(0,r._)("table",null,[(0,r._)("thead",null,[(0,r._)("tr",null,[We,(0,r._)("th",null,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>a.newStudent=e)},null,512),[[n.nr,a.newStudent]]),(0,r._)("button",{onClick:s[3]||(s[3]=(...e)=>u.addStudent&&u.addStudent(...e))},"Add")])])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.students,((e,s)=>((0,r.wg)(),(0,r.iD)("tr",{key:s},[(0,r._)("td",null,(0,m.zw)(e),1),(0,r._)("td",null,[(0,r._)("button",{onClick:s=>u.deleteUser(e,!1)},"Delete",8,Be)])])))),128))])]),(0,r._)("button",null,[(0,r.Wm)(i,{to:{name:"AdminDashboard"},class:"btn btn-default"},{default:(0,r.w5)((()=>[(0,r.Uk)(" 返回主页 ")])),_:1})])])}var Je={data(){return{teachers:[],students:[],newTeacher:"",newStudent:"",error:"",courseName:"",courseInfo:""}},methods:{async getCourseData(){try{const e=await C.getCourseData(this.$route.params.courseID);"200"===e.data.status?(this.teachers=e.data.teachers,this.students=e.data.students,this.courseInfo=e.data.courseInfo,this.courseName=e.data.courseName):console.error("Failed to fetch course data")}catch(e){console.error("Error fetching course data:",e)}},async addTeacher(){if(this.newTeacher){const e=await C.addTeacher(this.$route.params.courseID,this.newTeacher);"200"===e.data.status?(this.teachers.push(this.newTeacher),this.newTeacher=""):this.error="Failed to add teacher"}},async addStudent(){if(this.newStudent){const e=await C.addStudent(this.$route.params.courseID,this.newStudent);"200"===e.data.status?(this.students.push(this.newStudent),this.newStudent=""):this.error="Failed to add student"}},async deleteUser(e,s){console.log(this.$route.params.courseID,e,s),await C.deleteUser(this.$route.params.courseID,e),s?this.teachers=this.teachers.filter((s=>s!==e)):this.students=this.students.filter((s=>s!==e))}},async mounted(){await this.getCourseData()}};const Qe=(0,i.Z)(Je,[["render",Ge],["__scopeId","data-v-3ef3fd56"]]);var Xe=Qe;const es=e=>((0,r.dD)("data-v-c327be80"),e=e(),(0,r.Cn)(),e),ss={class:"assignment-submission"},ts={key:0,class:"error"},ns=es((()=>(0,r._)("h3",null,"作业提交情况：",-1))),rs=es((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{class:"centered-header"},"提交ID"),(0,r._)("th",{class:"centered-header"},"学生ID"),(0,r._)("th",{class:"centered-header"},"提交信息"),(0,r._)("th",{class:"centered-header"},"分数"),(0,r._)("th",{class:"centered-header"},"操作")])],-1))),os=["onUpdate:modelValue","placeholder"],as=["onClick"];function us(e,s,t,o,a,u){return(0,r.wg)(),(0,r.iD)("div",ss,[a.error?((0,r.wg)(),(0,r.iD)("div",ts,(0,m.zw)(a.error),1)):(0,r.kq)("",!0),ns,(0,r._)("table",null,[rs,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.submissions,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.submissionID},[(0,r._)("td",null,(0,m.zw)(e.submissionID),1),(0,r._)("td",null,(0,m.zw)(e.userID),1),(0,r._)("td",null,(0,m.zw)(e.submissionInfo),1),(0,r._)("td",null,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s=>a.editSubmissionScore[e.submissionID]=s,type:"int",placeholder:e.submissionScore||"未打分"},null,8,os),[[n.nr,a.editSubmissionScore[e.submissionID]]])]),(0,r._)("td",null,[(0,r._)("button",{onClick:s=>u.scoreSubmission(e.submissionID)},"评分",8,as)])])))),128))])])])}var is={data(){return{submissions:[],editSubmissionScore:{},error:""}},async mounted(){const e=this.$route.params.assignmentID,s=this.$route.params.courseID,t=await C.getCourseAssignmentSubmissions(e,s,!0);"200"===t.status?this.submissions=t.tabledata:console.error("Failed to fetch submissions")},methods:{async scoreSubmission(e){console.log("sumissionID:",e);const s=this.editSubmissionScore[e];if(s){const t=await C.updateSubmissionScore(e,s);if(console.log("response:",t),"200"===t.status){const t=this.submissions.find((s=>s.submissionID===e));t.submissionScore=s,this.error=""}else this.error="Failed to update submission score",this.editSubmissionScore[e]=""}}}};const ls=(0,i.Z)(is,[["render",us],["__scopeId","data-v-c327be80"]]);var cs=ls;const ds=e=>((0,r.dD)("data-v-32a2180c"),e=e(),(0,r.Cn)(),e),ms={class:"course-details"},hs={class:"teacher-list"},Is=ds((()=>(0,r._)("h3",null,"教师列表：",-1))),gs=ds((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{class:"centered-header"},"教师ID")])],-1))),ps={class:"student-list"},Ds=ds((()=>(0,r._)("h3",null,"学生列表：",-1))),_s=ds((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{class:"centered-header"},"学生ID")])],-1))),ws={class:"lecture-list"},bs=ds((()=>(0,r._)("h3",null,"讲座信息：",-1))),fs=ds((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{class:"centered-header"},"讲座ID"),(0,r._)("th",{class:"centered-header"},"讲座信息")])],-1))),ys={class:"assignment-list"},vs=ds((()=>(0,r._)("h3",null,"作业信息：",-1))),Cs=ds((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{class:"centered-header"},"作业ID"),(0,r._)("th",{class:"centered-header"},"作业信息"),(0,r._)("th",{class:"centered-header"},"操作")])],-1))),ks=["onClick"];function As(e,s,t,n,o,a){return(0,r.wg)(),(0,r.iD)("div",ms,[(0,r._)("h3",null,"课程名称："+(0,m.zw)(o.courseName),1),(0,r._)("h3",null,"课程信息："+(0,m.zw)(o.courseInfo),1),(0,r._)("div",hs,[Is,(0,r._)("table",null,[gs,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.teachers,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e},[(0,r._)("td",null,(0,m.zw)(e),1)])))),128))])])]),(0,r._)("div",ps,[Ds,(0,r._)("table",null,[_s,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.students,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e},[(0,r._)("td",null,(0,m.zw)(e),1)])))),128))])])]),(0,r._)("div",ws,[bs,(0,r._)("table",null,[fs,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.lectures,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.lectureID},[(0,r._)("td",null,(0,m.zw)(e.lectureID),1),(0,r._)("td",null,(0,m.zw)(e.lectureInfo),1)])))),128))])])]),(0,r._)("div",ys,[vs,(0,r._)("table",null,[Cs,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.assignments,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.assignmentID},[(0,r._)("td",null,(0,m.zw)(e.assignmentID),1),(0,r._)("td",null,(0,m.zw)(e.assignmentInfo),1),(0,r._)("td",null,[(0,r._)("button",{onClick:s=>a.goToAssignment(e.assignmentID,o.courseID,o.userID)},"查看作业",8,ks)])])))),128))])])])])}var Ss={data(){return{courseID:"",userID:"",students:[],Teachers:[],lectures:[],assignments:[],courseInfo:"",courseName:"",newLectureInfo:{lectureID:"",lectureInfo:""},newAssignmentInfo:{assignmentID:"",assignmentInfo:""},editLectureInfo:{},editAssignmentInfo:{}}},async mounted(){this.userID=this.$route.params.userID,this.courseID=this.$route.params.courseID;const e=this.$route.params.courseID,s=await C.getCourseData(e);"200"===s.data.status?(this.students=s.data.students,this.teachers=s.data.teachers,this.courseInfo=s.data.courseInfo,this.courseName=s.data.courseName):console.error("Failed to fetch course data");const t=await C.getCourseLectures(e);this.lectures=t.tabledata;const n=await C.getCourseAssignments(e);this.assignments=n.tabledata},methods:{goToAssignment(e,s,t){this.$router.push({name:"StudentAssignment",params:{assignmentID:e,courseID:s,userID:t}})}}};const Ls=(0,i.Z)(Ss,[["render",As],["__scopeId","data-v-32a2180c"]]);var Ts=Ls;const Us=e=>((0,r.dD)("data-v-1ed5eba8"),e=e(),(0,r.Cn)(),e),zs={class:"assignment-submission"},$s=Us((()=>(0,r._)("h3",null,"提交作业",-1))),Ns={class:"input-group"},Vs=Us((()=>(0,r._)("h3",null,"您的作业提交情况：",-1))),Es=Us((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{class:"centered-header"},"提交ID"),(0,r._)("th",{class:"centered-header"},"提交信息"),(0,r._)("th",{class:"centered-header"},"分数")])],-1)));function Ms(e,s,t,o,a,u){return(0,r.wg)(),(0,r.iD)("div",zs,[$s,(0,r._)("div",Ns,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>a.newsubmissionInfo=e),type:"text",placeholder:"输入提交信息"},null,512),[[n.nr,a.newsubmissionInfo]]),(0,r._)("button",{onClick:s[1]||(s[1]=(...e)=>u.submitAssignment&&u.submitAssignment(...e))},"提交作业")]),Vs,(0,r._)("table",null,[Es,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.submissions,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.submissionID},[(0,r._)("td",null,(0,m.zw)(e.submissionID),1),(0,r._)("td",null,(0,m.zw)(e.submissionInfo),1),(0,r._)("td",null,(0,m.zw)(e.submissionScore),1)])))),128))])])])}var Hs={data(){return{newsubmissionInfo:"",submissions:[],editSubmissionScore:{}}},async mounted(){const e=this.$route.params.assignmentID,s=this.$route.params.courseID,t=this.$route.params.userID;console.log("userID:",t);const n=await C.getCourseAssignmentSubmissionsStudent(e,s,t,!1);if("200"===n.status){this.submissions=n.tabledata;for(let e=0;e<this.submissions.length;e++)null===this.submissions[e].submissionScore&&(this.submissions[e].submissionScore="未打分")}else console.error("Failed to fetch submissions")},methods:{async submitAssignment(){const e=this.$route.params.assignmentID,s=this.$route.params.courseID,t=this.$route.params.userID,n=this.newsubmissionInfo,r=await C.submitAssignment(e,s,t,n);this.newsubmissionInfo="",console.log("response:",r);const o=r.submissionID;this.submissions.push({submissionID:o,submissionInfo:n,submissionScore:"未打分"})}}};const Ks=(0,i.Z)(Hs,[["render",Ms],["__scopeId","data-v-1ed5eba8"]]);var Ys=Ks;const Fs=[{path:"/",redirect:"/login"},{path:"/login",name:"LogIn",component:S},{path:"/register",name:"Register",component:K},{path:"/admin-dashboard",name:"AdminDashboard",component:G},{path:"/user-dashboard",name:"UserDashboard",component:de},{path:"/admin/course/:courseID",name:"AdminCourse",component:Xe},{path:"/teacher-course/:courseID/:userID",name:"TeacherCourse",component:Fe},{path:"/teacher/assignment/:courseID/:assignmentID",name:"TeacherAssignment",component:cs,props:!0},{path:"/student-course/:courseID/:userID",name:"StudentCourse",component:Ts},{path:"/student/assignment/:courseID/:assignmentID/:userID",name:"StudentAssignment",component:Ys,props:!0}],xs=(0,d.p7)({history:(0,d.PO)(),routes:Fs});var Os=xs;const Zs=(0,n.ri)(c);Zs.use(Os),Zs.mount("#app")}},s={};function t(n){var r=s[n];if(void 0!==r)return r.exports;var o=s[n]={exports:{}};return e[n].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(s,n,r,o){if(!n){var a=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],o=e[c][2];for(var u=!0,i=0;i<n.length;i++)(!1&o||a>=o)&&Object.keys(t.O).every((function(e){return t.O[e](n[i])}))?n.splice(i--,1):(u=!1,o<a&&(a=o));if(u){e.splice(c--,1);var l=r();void 0!==l&&(s=l)}}return s}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,r,o]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){var e={143:0};t.O.j=function(s){return 0===e[s]};var s=function(s,n){var r,o,a=n[0],u=n[1],i=n[2],l=0;if(a.some((function(s){return 0!==e[s]}))){for(r in u)t.o(u,r)&&(t.m[r]=u[r]);if(i)var c=i(t)}for(s&&s(n);l<a.length;l++)o=a[l],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(c)},n=self["webpackChunkcourse"]=self["webpackChunkcourse"]||[];n.forEach(s.bind(null,0)),n.push=s.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(3719)}));n=t.O(n)})();
//# sourceMappingURL=app.ce62821c.js.map